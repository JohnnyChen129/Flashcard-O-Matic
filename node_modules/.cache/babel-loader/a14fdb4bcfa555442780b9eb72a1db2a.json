{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/sainw/OneDrive/Desktop/completed Project march card o matic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/sainw/OneDrive/Desktop/completed Project march card o matic/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/sainw/OneDrive/Desktop/completed Project march card o matic/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/sainw/OneDrive/Desktop/completed Project march card o matic/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\sainw\\\\OneDrive\\\\Desktop\\\\completed Project march card o matic\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from\"react\";import{Link,useHistory,useParams}from\"react-router-dom\";import{createCard,readCard,updateCard}from\"../utils/api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CardForm(_ref){var _ref$mode=_ref.mode,mode=_ref$mode===void 0?\"create\":_ref$mode;var history=useHistory();var _useParams=useParams(),deckId=_useParams.deckId,cardId=_useParams.cardId;var initialFormData={front:\"\",back:\"\"};var _useState=useState(_objectSpread({},initialFormData)),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var handleChange=function handleChange(_ref2){var target=_ref2.target;return setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},target.name,target.value)));};useEffect(function(){var abortCon=new AbortController();function getEditCard(){return _getEditCard.apply(this,arguments);}function _getEditCard(){_getEditCard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var cardToEdit;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return readCard(cardId,abortCon.signal);case 3:cardToEdit=_context.sent;setFormData(_objectSpread({},cardToEdit));_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);throw _context.t0;case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _getEditCard.apply(this,arguments);}if(mode===\"edit\"){getEditCard();}return function(){return abortCon.abort();};},[cardId,mode]);var handleSubmit=function handleSubmit(event){event.preventDefault();var abortCon=new AbortController();function addCard(){return _addCard.apply(this,arguments);}function _addCard(){_addCard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return createCard(deckId,formData,abortCon.signal);case 3:setFormData(_objectSpread({},initialFormData));_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);throw _context2.t0;case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return _addCard.apply(this,arguments);}function editCard(){return _editCard.apply(this,arguments);}function _editCard(){_editCard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return updateCard(formData,abortCon.signal);case 3:history.push(\"/decks/\".concat(deckId));_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);throw _context3.t0;case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return _editCard.apply(this,arguments);}mode===\"edit\"?editCard():addCard();};return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-column\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"col-12\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"front\",children:\"Front\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",className:\"form-control form-control-lg\",id:\"front\",name:\"front\",value:formData.front,onChange:handleChange,placeholder:\"Front side of card\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"back\",children:\"Back\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",className:\"form-control form-control-lg\",id:\"back\",name:\"back\",value:formData.back,onChange:handleChange,placeholder:\"Back side of card\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(Link,{to:\"/decks/\".concat(deckId),className:\"btn btn-secondary mr-2\",children:mode===\"edit\"?\"Cancel\":\"Done\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:mode===\"edit\"?\"Submit\":\"Save\"})]})]})});}","map":{"version":3,"sources":["C:/Users/sainw/OneDrive/Desktop/completed Project march card o matic/src/Cards/CardForm.js"],"names":["React","useEffect","useState","Link","useHistory","useParams","createCard","readCard","updateCard","CardForm","mode","history","deckId","cardId","initialFormData","front","back","formData","setFormData","handleChange","target","name","value","abortCon","AbortController","getEditCard","signal","cardToEdit","abort","handleSubmit","event","preventDefault","addCard","editCard","push"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useHistory, useParams } from \"react-router-dom\";\r\nimport { createCard, readCard, updateCard } from \"../utils/api\";\r\n\r\nexport default function CardForm({ mode = \"create\" }) {\r\n  const history = useHistory();\r\n  const { deckId, cardId } = useParams();\r\n  const initialFormData = {\r\n    front: \"\",\r\n    back: \"\",\r\n  };\r\n  const [formData, setFormData] = useState({ ...initialFormData });\r\n\r\n  const handleChange = ({ target }) =>\r\n    setFormData({ ...formData, [target.name]: target.value });\r\n\r\n  useEffect(() => {\r\n    const abortCon = new AbortController();\r\n    async function getEditCard() {\r\n      try {\r\n        const cardToEdit = await readCard(cardId, abortCon.signal);\r\n        setFormData({ ...cardToEdit });\r\n      } catch (err) {\r\n        throw err;\r\n      }\r\n    }\r\n    if (mode === \"edit\") {\r\n      getEditCard();\r\n    }\r\n    return () => abortCon.abort();\r\n  }, [cardId, mode]);\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    const abortCon = new AbortController();\r\n    async function addCard() {\r\n      try {\r\n        await createCard(deckId, formData, abortCon.signal);\r\n        setFormData({ ...initialFormData });\r\n      } catch (err) {\r\n        throw err;\r\n      }\r\n    }\r\n    async function editCard() {\r\n      try {\r\n        await updateCard(formData, abortCon.signal);\r\n        history.push(`/decks/${deckId}`);\r\n      } catch (err) {\r\n        throw err;\r\n      }\r\n    }\r\n    mode === \"edit\" ? editCard() : addCard();\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex flex-column\">\r\n      <form className=\"col-12\" onSubmit={handleSubmit}>\r\n        <div className=\"row form-group\">\r\n          <label htmlFor=\"front\">Front</label>\r\n          <textarea\r\n            type=\"text\"\r\n            className=\"form-control form-control-lg\"\r\n            id=\"front\"\r\n            name=\"front\"\r\n            value={formData.front}\r\n            onChange={handleChange}\r\n            placeholder=\"Front side of card\"\r\n          />\r\n        </div>\r\n        <div className=\"row form-group\">\r\n          <label htmlFor=\"back\">Back</label>\r\n          <textarea\r\n            type=\"text\"\r\n            className=\"form-control form-control-lg\"\r\n            id=\"back\"\r\n            name=\"back\"\r\n            value={formData.back}\r\n            onChange={handleChange}\r\n            placeholder=\"Back side of card\"\r\n          />\r\n        </div>\r\n        <div className=\"row\">\r\n          <Link to={`/decks/${deckId}`} className=\"btn btn-secondary mr-2\">\r\n            {mode === \"edit\" ? \"Cancel\" : \"Done\"}\r\n          </Link>\r\n          <button type=\"submit\" className=\"btn btn-primary\">\r\n            {mode === \"edit\" ? \"Submit\" : \"Save\"}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}