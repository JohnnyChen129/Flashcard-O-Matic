{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/sainw/OneDrive/Desktop/completed Project march card o matic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/sainw/OneDrive/Desktop/completed Project march card o matic/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/sainw/OneDrive/Desktop/completed Project march card o matic/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/sainw/OneDrive/Desktop/completed Project march card o matic/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\sainw\\\\OneDrive\\\\Desktop\\\\completed Project march card o matic\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from\"react\";import{Link,useHistory,useParams}from\"react-router-dom\";import{createDeck,readDeck,updateDeck}from\"../utils/api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function DeckForm(_ref){var mode=_ref.mode;var history=useHistory();var _useParams=useParams(),deckId=_useParams.deckId;var initialFormData={name:\"\",description:\"\"};var _useState=useState(_objectSpread({},initialFormData)),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var handleChange=function handleChange(_ref2){var target=_ref2.target;return setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},target.name,target.value)));};useEffect(function(){var abortCon=new AbortController();function getEditDeck(){return _getEditDeck.apply(this,arguments);}function _getEditDeck(){_getEditDeck=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var deckToEdit;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return readDeck(deckId,abortCon.signal);case 3:deckToEdit=_context.sent;setFormData(_objectSpread({},deckToEdit));_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);throw _context.t0;case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _getEditDeck.apply(this,arguments);}if(mode===\"edit\"){getEditDeck();}return function(){return abortCon.abort();};},[deckId,mode]);var handleSubmit=function handleSubmit(event){event.preventDefault();var abortCon=new AbortController();function createNewDeck(){return _createNewDeck.apply(this,arguments);}function _createNewDeck(){_createNewDeck=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var newDeck;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return createDeck(formData,abortCon.signal);case 3:newDeck=_context2.sent;setFormData(_objectSpread({},initialFormData));history.push(\"/decks/\".concat(newDeck.id));_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);throw _context2.t0;case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return _createNewDeck.apply(this,arguments);}function editDeck(){return _editDeck.apply(this,arguments);}function _editDeck(){_editDeck=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return updateDeck(formData,abortCon.signal);case 3:history.push(\"/decks/\".concat(deckId));_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);throw _context3.t0;case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return _editDeck.apply(this,arguments);}mode===\"create\"?createNewDeck():editDeck();return function(){return abortCon.abort();};};return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-column\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"col-12\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"name\",name:\"name\",value:formData.name,onChange:handleChange,placeholder:\"Deck Name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",className:\"form-control\",id:\"description\",name:\"description\",value:formData.description,onChange:handleChange,placeholder:\"Brief description of the deck\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(Link,{to:mode===\"create\"?\"/\":\"/decks/\".concat(deckId),className:\"btn btn-secondary mr-2\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Submit\"})]})]})});}","map":{"version":3,"sources":["C:/Users/sainw/OneDrive/Desktop/completed Project march card o matic/src/Deck/DeckForm.js"],"names":["React","useEffect","useState","Link","useHistory","useParams","createDeck","readDeck","updateDeck","DeckForm","mode","history","deckId","initialFormData","name","description","formData","setFormData","handleChange","target","value","abortCon","AbortController","getEditDeck","signal","deckToEdit","abort","handleSubmit","event","preventDefault","createNewDeck","newDeck","push","id","editDeck"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useHistory, useParams } from \"react-router-dom\";\r\nimport { createDeck, readDeck, updateDeck } from \"../utils/api\";\r\n\r\nexport default function DeckForm({ mode }) {\r\n  const history = useHistory();\r\n  const { deckId } = useParams();\r\n\r\n  let initialFormData = {\r\n    name: \"\",\r\n    description: \"\",\r\n  };\r\n  const [formData, setFormData] = useState({ ...initialFormData });\r\n\r\n  const handleChange = ({ target }) =>\r\n    setFormData({ ...formData, [target.name]: target.value });\r\n\r\n  useEffect(() => {\r\n    const abortCon = new AbortController();\r\n\r\n    async function getEditDeck() {\r\n      try {\r\n        const deckToEdit = await readDeck(deckId, abortCon.signal);\r\n        setFormData({ ...deckToEdit });\r\n      } catch (err) {\r\n        throw err;\r\n      }\r\n    }\r\n    if (mode === \"edit\") {\r\n      getEditDeck();\r\n    }\r\n    return () => abortCon.abort();\r\n  }, [deckId, mode]);\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    const abortCon = new AbortController();\r\n    async function createNewDeck() {\r\n      try {\r\n        const newDeck = await createDeck(formData, abortCon.signal);\r\n        setFormData({ ...initialFormData });\r\n        history.push(`/decks/${newDeck.id}`);\r\n      } catch (err) {\r\n        throw err;\r\n      }\r\n    }\r\n    async function editDeck() {\r\n      try {\r\n        await updateDeck(formData, abortCon.signal);\r\n        history.push(`/decks/${deckId}`);\r\n      } catch (err) {\r\n        throw err;\r\n      }\r\n    }\r\n    mode === \"create\" ? createNewDeck() : editDeck();\r\n    return () => abortCon.abort();\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex flex-column\">\r\n      <form className=\"col-12\" onSubmit={handleSubmit}>\r\n        <div className=\"row form-group\">\r\n          <label htmlFor=\"name\">Name</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"name\"\r\n            name=\"name\"\r\n            value={formData.name}\r\n            onChange={handleChange}\r\n            placeholder=\"Deck Name\"\r\n          />\r\n        </div>\r\n        <div className=\"row form-group\">\r\n          <label htmlFor=\"description\">Description</label>\r\n          <textarea\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"description\"\r\n            name=\"description\"\r\n            value={formData.description}\r\n            onChange={handleChange}\r\n            placeholder=\"Brief description of the deck\"\r\n          />\r\n        </div>\r\n        <div className=\"row\">\r\n          <Link\r\n            to={mode === \"create\" ? \"/\" : `/decks/${deckId}`}\r\n            className=\"btn btn-secondary mr-2\"\r\n          >\r\n            Cancel\r\n          </Link>\r\n          <button type=\"submit\" className=\"btn btn-primary\">\r\n            Submit\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}